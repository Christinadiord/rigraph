---
title: "Function name changes: from dot case to snake case"
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

To provide a more consistent interface, igraph functions that have a dot case name,
like `add.edges()`, will be deprecated in favor of functions with a snake case name, 
like `add_edges()`.

Currently, for each function both alternatives work, but we'll incrementally remove the 
dot case functions, first emitting deprecation messages when they are used, then in a further version warnings,
until they actually result in an error.

Therefore, we'd like to ask you to update your codebases, be they packages or scripts.
Thank you for your cooperation!
Direct any question to us in the [igraph issue tracker](https://github.com/igraph/rigraph/issues).

```{r setup, echo=FALSE}
# parse script ----
zzz_script <- "https://raw.githubusercontent.com/igraph/rigraph/e82993a8312e996ab54572048741f508d64467f1/R/zzz-deprecate.R"

parse_script <- function(path) {
  path |>
    parse(keep.source = TRUE) |>
    xmlparsedata::xml_parse_data(pretty = TRUE) |>
    xml2::read_xml()
}

xml <- parse_script(zzz_script)

# extract all calls to deprecated()
deprecated_calls <- xml2::xml_find_all(
  xml,
  ".//SYMBOL_FUNCTION_CALL[text()='deprecated']"
)

tibblify_call <- function(deprecated_call) {
  args <- deprecated_call |>
    xml2::xml_parent() |>
    xml2::xml_siblings() |>
    purrr::keep(~xml2::xml_name(.x) == "expr")
  old <- xml2::xml_text(args[[1]])
  new <- xml2::xml_text(args[[2]])
  tibble::tibble(old = gsub('"', '', old), new = new)
}

deprecated_df <- purrr::map_df(deprecated_calls, tibblify_call)
names(deprecated_df) <- c("Old name", "New name")
knitr::kable(deprecated_df)
```
